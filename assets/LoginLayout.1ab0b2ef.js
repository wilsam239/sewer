import{Q as p,a as h,b as w,c as $,d as Q}from"./QLayout.a3b0dbcb.js";import{c as C,u as k,a as x,b as r,h as _,g as y,d as q,e as L,f as B,i as S,r as b,j as I,k as z,o as D,t as R,w as V,l as A,m as G,n as i,p as o,q as v,s as N,Q as U,v as j,x as P,G as T}from"./index.a04e89fb.js";const F={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},m={xs:2,sm:4,md:8,lg:16,xl:24};var M=C({name:"QSeparator",props:{...k,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const s=y(),a=x(e,s.proxy.$q),n=r(()=>e.vertical===!0?"vertical":"horizontal"),u=r(()=>` q-separator--${n.value}`),c=r(()=>e.inset!==!1?`${u.value}-${F[e.inset]}`:""),d=r(()=>`q-separator${u.value}${c.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(a.value===!0?" q-separator--dark":"")),t=r(()=>{const l={};if(e.size!==void 0&&(l[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const f=e.spaced===!0?`${m.md}px`:e.spaced in m?`${m[e.spaced]}px`:e.spaced,g=e.vertical===!0?["Left","Right"]:["Top","Bottom"];l[`margin${g[0]}`]=l[`margin${g[1]}`]=f}return l});return()=>_("hr",{class:d.value,style:t.value,"aria-orientation":n.value})}}),H=C({name:"QCardActions",props:{...q,vertical:Boolean},setup(e,{slots:s}){const a=L(e),n=r(()=>`q-card__actions ${a.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>_("div",{class:n.value},B(s.default))}});const W={class:"full-height"},E=v("div",{class:"row items-center no-wrap"},[v("div",{class:"col"},[v("div",{class:"text-h6"},"GitLab Config")])],-1),O=S({__name:"LoginLayout",setup(e){const s=b("id"),a=T,n=I(),u=z();let c,d=b(!0);return D(()=>{let t=window.location.href;t.includes("sewer/#")||(console.info("Fixing URL to have a hash."),t=t.replace("sewer/","sewer/#/"),window.location.href=decodeURIComponent(t)),c=u.query.code,c?a.loginWithCode(c).subscribe(()=>{n.push("/dashboard/all")}):(a.refresh_token&&a.refreshToken().pipe(R(()=>{n.push("/dashboard/all"),d.value=!1})).subscribe(),d.value=!1),s.value=a.clientID,a.isLoggedIn&&n.push("/dashboard/all")}),V(s,t=>{a.clientID=t}),(t,l)=>(A(),G(Q,{view:"hHh lpR fFf",class:"column justify-center"},{default:i(()=>[o($,{class:"fit row wrap justify-center items-start content-start"},{default:i(()=>[v("div",W,[o(p,{flat:"",bordered:"",class:N(["my-card",t.$q.dark.isActive?"bg-grey-9":"bg-grey-2"])},{default:i(()=>[o(h,null,{default:i(()=>[E]),_:1}),o(h,null,{default:i(()=>[o(w,{square:"",outlined:"",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=f=>s.value=f),label:"GitLab Client ID"},null,8,["modelValue"])]),_:1}),o(M),o(H,null,{default:i(()=>[o(U,{flat:"",onClick:l[1]||(l[1]=f=>j(a).loginNoCode()),disable:!s.value},{default:i(()=>[P("Login")]),_:1},8,["disable"])]),_:1})]),_:1},8,["class"])])]),_:1})]),_:1}))}});export{O as default};
