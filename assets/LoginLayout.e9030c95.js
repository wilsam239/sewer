import{c as C,u as p,a as w,b as c,h as _,g as $,d as k,r as g,e as x,f as y,o as Q,t as L,w as q,i as B,j as I,k as o,l,m,Q as S,n as D,p as b,q as R,s as z,v as V,x as G,G as N}from"./index.72207687.js";import{Q as U,a as j,b as T}from"./QLayout.b45005d3.js";const A={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},v={xs:2,sm:4,md:8,lg:16,xl:24};var F=C({name:"QSeparator",props:{...p,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const n=$(),t=w(e,n.proxy.$q),i=c(()=>e.vertical===!0?"vertical":"horizontal"),u=c(()=>` q-separator--${i.value}`),r=c(()=>e.inset!==!1?`${u.value}-${A[e.inset]}`:""),d=c(()=>`q-separator${u.value}${r.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(t.value===!0?" q-separator--dark":"")),a=c(()=>{const s={};if(e.size!==void 0&&(s[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const f=e.spaced===!0?`${v.md}px`:e.spaced in v?`${v[e.spaced]}px`:e.spaced,h=e.vertical===!0?["Left","Right"]:["Top","Bottom"];s[`margin${h[0]}`]=s[`margin${h[1]}`]=f}return s});return()=>_("hr",{class:d.value,style:a.value,"aria-orientation":i.value})}});const M={class:"full-height"},P=m("div",{class:"row items-center no-wrap"},[m("div",{class:"col"},[m("div",{class:"text-h6"},"GitLab Config")])],-1),E=k({__name:"LoginLayout",setup(e){const n=g("id"),t=N,i=x(),u=y();let r,d=g(!0);return Q(()=>{let a=window.location.href;a.includes("sewer/#")||(console.info("Fixing URL to have a hash."),a=a.replace("sewer/","sewer/#/"),window.location.href=decodeURIComponent(a)),r=u.query.code,r?t.loginWithCode(r).subscribe(()=>{i.push("/dashboard/all")}):(t.refresh_token&&t.refreshToken().pipe(L(()=>{i.push("/dashboard/all"),d.value=!1})).subscribe(),d.value=!1),n.value=t.clientID,t.isLoggedIn&&i.push("/dashboard/all")}),q(n,a=>{t.clientID=a}),(a,s)=>(B(),I(T,{view:"hHh lpR fFf",class:"column justify-center"},{default:o(()=>[l(j,{class:"fit row wrap justify-center items-start content-start"},{default:o(()=>[m("div",M,[l(S,{flat:"",bordered:"",class:D(["my-card",a.$q.dark.isActive?"bg-grey-9":"bg-grey-2"])},{default:o(()=>[l(b,null,{default:o(()=>[P]),_:1}),l(b,null,{default:o(()=>[l(U,{square:"",outlined:"",modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=f=>n.value=f),label:"GitLab Client ID"},null,8,["modelValue"])]),_:1}),l(F),l(R,null,{default:o(()=>[l(z,{flat:"",onClick:s[1]||(s[1]=f=>V(t).loginNoCode()),disable:!n.value},{default:o(()=>[G("Login")]),_:1},8,["disable"])]),_:1})]),_:1},8,["class"])])]),_:1})]),_:1}))}});export{E as default};
